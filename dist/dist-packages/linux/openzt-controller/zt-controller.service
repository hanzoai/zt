[Unit]
Description=Hanzo ZT Controller
After=network-online.target

[Service]
Type=simple

# manage the user and permissions for the service automatically
DynamicUser=yes

# this env file configures the service, including whether or not to perform bootstrapping
EnvironmentFile=/opt/hanzozt/etc/controller/service.env

# relative to /var/lib
StateDirectory=zt-controller
WorkingDirectory=/var/lib/zt-controller
ReadOnlyPaths=/opt/hanzozt/share/console

ExecStartPre=/opt/hanzozt/etc/controller/entrypoint.bash check config.yml
ExecStart=/opt/hanzozt/bin/zt controller run config.yml ${ZITI_ARGS}

Restart=always
RestartSec=3

LimitNOFILE=65535
UMask=0007

[Install]
WantedBy=multi-user.target
